## DataFlowAnalyzer
Collects end-to-end data lineage in the Data Warehouses environment by analyzing SQL script especially stored procedure like PL/SQL that used in a ETL process.

This tool introduces a new dataflow model to describle the data flow of table/columns. 

For the detailed explanation of the relationship of target and source table/column, and how this tool works,
please check [this article](http://support.sqlparser.com/tutorials/gsp-demo-data-lineage/).

This tool is built from the scratch, includes all features of Dlineage and DlineageRelation demo, and has more features than Dlineage and DlineageRelation.
It is the main part of the backend of [this online SQLFlow](https://sqlflow.gudusoft.com) tool.

[Here is a sample result](data-lineage-result.xml) generated by this tool is in XML format with all dataflow information included.



### Usage
`Usage: java DataFlowAnalyzer [/f <path_to_sql_file>] [/d <path_to_directory_includes_sql_files>] [/stat] [/s] [/i] [/ic] [/lof] [/j] [/text] [/json] [/traceView] [/t <database type>] [/o <output file path>] [/version] [/h <host> /P <port> /u <username> /p <password> /db <database>]`

- [/s [/text]]
	
	The result generated with this option is the same as [columnImpact](../columnImpact) demo with /s option.
	

Here is the list of available database after /t option:
```
access,bigquery,couchbase,dax,db2,greenplum,hana,hive,impala,informix,mdx,mssql,
sqlserver,mysql,netezza,odbc,openedge,oracle,postgresql,postgres,redshift,snowflake,
sybase,teradata,soql,vertica
```

	
### Connect to the database instance to fetch metadata
This tool can connect to a database to fetch the metadata and present a more accurate data lineage analysis result.
```
	/h: Optional, specify the host of jdbc connection
	/P: Optional, specify the port of jdbc connection
	/u: Optional, specify the username of jdbc connection.
	/p: Optional, specify the password of jdbc connection
	/db: Optional, specify the database of jdbc connection
	/schema: Optional, specify the schema which is used for extracting metadata.
```

When you use this feature, you should put the jdbc driver to your java classpath, and use java -cp command to load the jdbc driver jar.

For example, if you put the jdbc jar to the external_lib directory, the java command is:
```sh
	java -cp .;lib/*;external_lib/* demos.dlineage.DataFlowAnalyzer /h localhost /P 3306 /u root /p password /db sample /t mysql /f sample.sql /s /json 

```
Currently, gsp able to connect to the following databases with the proper JDBC driver
```
oracle, sql server, mysql, postgresql, greenplum, netezza, snowflake.
```

	
### Binary version
http://ftp.gudusoft.com/dl/dataflowanalyzer/DataFlowAnalyzer_trial.zip

In order to run this utility, please install Oracle JDK1.8 or higher on your computer correctly.
Then, run this utility like this:

```
java -jar DataFlowAnalyzer.jar /t mssql /d path_to_directory_includes_sql_files /stat
```



### Links
- [First version, 2017-8](https://github.com/sqlparser/wings/issues/494)